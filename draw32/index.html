<html>
<head>
<meta name='viewport' content='width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no' />
<title>32ç­ä¸“å±æŠ½å·ğŸ”</title>
<script>
var configs={

// æŠ½å·æœºé…ç½®

// æ‰€æœ‰äººçš„åå­—ï¼Œä»¥ç©ºæ ¼åˆ†éš”
// ä¾‹ï¼š'å¼ ä¸‰ æå›› ç‹äº”'
// è¿™ä¸ªå­—æ®µæŒ‡å®šå“ªäº›äººä¼šè¢«æŠ½åˆ°
//names: 'å”± è·³ rap ç¯®çƒ å¤ åªå›  ğŸ” å…¨æ°‘åˆ¶ä½œäºº ç»ƒä¹  ä¸¤å¹´åŠ ä½ å¤ªç¾ Oh~ Baby è ¢è ¢æ¬²åŠ¨ ä½ æ˜¯æˆ‘çš„ æˆ‘æ˜¯ä½ çš„ å¤šä¸€çœ¼ é è¿‘ç‚¹ ä¼šçˆ†ç‚¸ ä¼šèåŒ– youyou ç¬¬ä¸€æ¬¡å‘€ å»å¦è®¤',
names: 'è°¢é”¦ç° é™ˆå½¦å¸Œ å¢å©§ èƒ¡ä¼Šè¯º å”è‚–å˜‰ç¦¾ éŸ©å­œå¦ è‚–å°§ æ—ä¹¦æ¶µ æ—æ€å½¤ è‚–æ¯…è¯º æ—å©§ éƒ­é›¨è± æ›¾è½²ç® å¼ å˜‰æ€¡ æ—ç¼ å´èŠ·æ¶µ æ½˜ä½³æ­† é™ˆé™é›¯ æ¨ä¾è¯º æ±ªæ¬£é›… å´æ™“è‰³ è‰¾è¯—ç´ ä¸Šå®˜æ¢¦æ»¢ é»„æ˜• åˆ˜æ˜è°¦ æ½˜äºå‡¡ ç½—å­å®¸ é™ˆæ™ºè½© é‚±æ³½æ¾ éŸ¦ä¿¡ç„¶ åˆ˜æ¾é’ æ—å®‡å‡¯ é»„çƒ¨ æ—ç®åŸ é™ˆéœ–é’² å¼ å®‡æ¶µ æ¨å¿—æ™¨ è”¡æ—­åœ£ é»„æ—­å‡ å®‹ä½³è±ª ä½•æ™ºå‡¯ ä½³å®‡ï¼ èƒ¡é™ˆæ— æ®µæ°‘èŠ· å¼ æ˜“å å´è±ª åˆ˜æ ‹ ç‹æ™¯é“',

// æŒ‰é¡ºåºæ’çš„åå­—ï¼Œä»¥ç©ºæ ¼åˆ†éš”
// å’Œnamesä¸€æ ·ï¼Œä½†æ˜¯ä¸å­˜åœ¨çš„ä½ç½®è¦å¤šç©ºä¸€æ ¼
names_index: 'è°¢é”¦ç° é™ˆå½¦å¸Œ å¢å©§ èƒ¡ä¼Šè¯º å”è‚–å˜‰ç¦¾ éŸ©å­œå¦ è‚–å°§ æ—ä¹¦æ¶µ æ—æ€å½¤ è‚–æ¯…è¯º æ—å©§ éƒ­é›¨è± æ›¾è½²ç® å¼ å˜‰æ€¡ æ—ç¼ å´èŠ·æ¶µ æ½˜ä½³æ­† é™ˆé™é›¯ æ¨ä¾è¯º æ±ªæ¬£é›… å´æ™“è‰³ è‰¾è¯—ç´ ä¸Šå®˜æ¢¦æ»¢ é»„æ˜• åˆ˜æ˜è°¦ æ½˜äºå‡¡ ç½—å­å®¸ é™ˆæ™ºè½© é‚±æ³½æ¾ éŸ¦ä¿¡ç„¶ åˆ˜æ¾é’ æ—å®‡å‡¯ é»„çƒ¨ æ—ç®åŸ é™ˆéœ–é’² å¼ å®‡æ¶µ æ¨å¿—æ™¨ è”¡æ—­åœ£ é»„æ—­å‡ å®‹ä½³è±ª ä½•æ™ºå‡¯ ä½³å®‡ï¼ èƒ¡é™ˆæ— æ®µæ°‘èŠ· å¼ æ˜“å å´è±ª åˆ˜æ ‹ ç‹æ™¯é“',

// ä¸€å¸§(frame)çš„é•¿åº¦ï¼Œms
// å»ºè®®50
frame: 12,

// åœ¨å‡ºç°æœ€ç»ˆç»“æœå‰ï¼Œé—ªç°å¤šå°‘ä¸ªåå­—
// å»ºè®®4
before: 43*0,

// æ˜¯å¦æˆªå–å‰ä¸¤ä¸ªå­—
cuttwo: false,

// è®¾ç½®å›ºæœ‰æµ‹è¯•é¡¹
fixed: [''],

// æ˜¯å¦å¯ç”¨å½©è›‹ & å½©è›‹é…ç½®
eggs: {
    //æ€»å¼€å…³
    able: false,
    //ç©æ¢—æ¦‚ç‡
    //p_jok: 0.15,
    //å°¾æ€æ¦‚ç‡
    p_end: 0.3,
},

};
</script>
<style>
body{
    width: 100%;
    height: 67.6vw;
    padding-top: 1em;
    font-size: 6.76vw;
    line-height: 1;
    text-align: center;
    background-color: #fafafa;
}
div{
    position: relative;	
    margin: 0;
    box-sizing: border-box;
    border: 0px solid red;
    padding: 0;
    display: inline-block;
    float: left;
    width: 100%;
    height: 100%;
}
h1{
    font-size: 1.5em;
    font-weight: normal;
    margin: 0;
    border: 0.1em solid #cccccc;
    border-radius: 0.3em;
    padding: 0.3em;
    display: inline-block;
    background-color: #eeeeee;
}
h2{
    font-size: 1.1em;
    font-weight: normal;
    margin: 0;
    border: 0.1em solid #cccccc;
    border-radius: 0.3em;
    padding: 0.2em;
    display: inline-block;
    background-color: #eeeeee;
}
table{
    border: 0;
    margin: 0;
    padding: 0;
    width: 100%;
    font-size: 1em;
}
td{
    padding: 0.1em;
    width: 50%;
    height: 100%;
    text-align: center;
}

#options{
    position: fixed;
    height: auto;
    width: 70%;
    top: 1.2em;
    left: 15%;
    z-index: 9;
    padding: 0.9em;
    border: 0.2em solid #bf620a;
    border-radius: 1em;
    background-color: #eeeeee;
}
#num,#num2{
    font-size: 1.3em;
}
#redraw{
    height: 1.1em;
    padding: 0.3em;
    margin: 0;
}
#redrawbutton{
    height: 1.1em;
    padding-left: 0.1em;
    padding-right: 0.4em;
}
#redrawball{
    width: 1.1em;
    height: 1.1em;
    position: relative;
    top: 0.2em;
}
#display{
    padding-top: 0.5em;
}

#drawing,#options,#blue,#redraw{
    display: none;
}

.opt-tips{
    display: inline-block;
    text-align: left;
    font-size: 0.5em;
}
.ball{
    width: 2em;
    height: 2em;
    border-radius: 50vw;
}
.bt{
    height: 1.2em;
    padding: 0 0.3em;
    border: 0.1em solid #114514;
    border-radius: 0.9em;
    color: #ffffff;
    background-color:#199810;
}
.bt5{
    height: 1.2em;
    padding: 0 0.3em;
    border: 0.1em solid #bf2d0e;
    border-radius: 0.9em;
    color: #ffffff;
    background-color:#ddaa00;
}
.bt7{
    height: 1.2em;
    padding: 0 0.3em;
    border: 0.1em solid #191981;
    border-radius: 0.9em;
    color: #ff0000;
    background-color:#addddd;
}
.t34{
    position: relative;
    top: -0.1em;
    display: inline-block;
    width: 0.667em;
}
</style>
</head>
<body>
<div id='entering'>
    <h1>æ¬¢è¿æŠ½å·</h1>
    <p>
        <span id='minus' class='bt t34'>-</span>
        <span id='num'>1</span>
        <span id='plus' class='bt t34'>+</span>
    </p>
    <span id='config' class='bt'>é€‰é¡¹...</span>
    <p>
        <span id='start' class='bt7'>&nbsp;å¼€å§‹ï¼</span>
    </p>
</div>
<div id='drawing'>
    <h2 id='drawtitle'>éšæœºæŠ½å–<span id='display_num'></span>åå°å¯çˆ±</h2>
    <p id='redraw'>
        <span id='minus2' class='bt t34'>-</span>
        <span id='num2'>1</span>
        <span id='plus2' class='bt t34'>+</span>
        <span id='redrawbutton' class='bt7'>
        <img id='redrawball' class='ball' src='' />
        é‡æ–°æŠ½å–
        </span>
    </p>
    <table id='display'>
        <!-- Dynamic --!>
        <tr id='tr0'></tr>
        <tr id='tr1'></tr>
        <tr id='tr2'></tr>
        <tr id='tr3'></tr>
        <tr id='tr4'></tr>
    </table>
</div>
<div id='options'>
    <h2>é€‰é¡¹</h2>
    <p id='blue'>
        <img class='ball' src='blue.png' />
        <span class='opt-tips'>
            ã€ç›¸é‡ä¹‹ç¼˜ã€‘<br />
            å…¨éƒ¨éšç¼˜ï¼Œçœ‹è„¸æŠ½ç­¾ã€‚<br />
            åœ¨è¿™ä¸ªæ¨¡å¼ä¸‹ï¼Œä»»ä½•æ¦‚ç‡<br />
            éƒ½æ˜¯éšæœºã€‚<br />
            æ®è¯´ï¼Œæ‹œä½›ç¥–èƒ½é™ä½æ¦‚ç‡
        </span>
    </p>
    <p id='pink'>
        <img class='ball' src='pink.png' />
        <span class='opt-tips'>
            ã€çº ç¼ ä¹‹ç¼˜ã€‘<br />
            å¹³å‡åˆ†å¸ƒï¼Œè½®æµå¤„åˆ‘ã€‚<br />
            åœ¨è¿™ä¸ªæ¨¡å¼ä¸‹ï¼Œå°†é«˜å‡ ç‡<br />
            æŠ½å–é€ƒè¿‡ä¸€åŠ«çš„å°å¯çˆ±ã€‚<br />
            åº•æ•°ç”¨å®Œåè§¦å‘ä¿åº•æœºåˆ¶
        </span>
    </p>
    <span id='toggle_mode' class='bt'>åˆ‡æ¢</span>
    <span id='close_opt' class='bt7'>ç¡®å®š</span>
</div>

<script>
try{

//new Audio('j.mp3');
//new Audio('jntm.mp3');
//var bgm=new Audio('rickroll.mp3');
var bgm=new Audio('https://music.163.com/song/media/outer/url?id=5221167');
bgm.currentTime=43.5;

function $(x){
    return document.getElementById(x);
}
function ns(xlist){
    xlist=xlist.split(' ');
    for(var i=0;i<xlist.length;i++){
        var x=xlist[i];
        window['$'+x]=$(x);
    }
}
function Timer(){
    var t=0;
    return function(f=function(){},x=1){
        setTimeout(f,t,arguments);
        t+=configs.frame*x;
    }
}
next=Timer()
function choose(arr){
    return arr[Math.floor(Math.random()*arr.length)]
}
function music(path,time=0){
    var audio=new Audio(path);
    audio.currentTime=time;
    audio.play();
    return audio;
}

ns('entering minus num plus config start');
ns('drawing display_num drawtitle redraw plus2 num2 minus2 redrawball tr0 tr1 tr2 tr3 tr4');
ns('options blue pink toggle_mode close_opt');

var num=1;
var mode=0;
var indrawing=false;
var rest=[];
var rows=[tr0,tr1,tr2,tr3,tr4];
var cells=[];
var all=configs.names.split(' ');
var all_index=(' '+configs.names_index).split(' ');
var star=Array(all_index.length).fill(-1);

document.body.onclick=function(){
    if(!indrawing){
        //music('j.mp3');
    }
}
$minus.onclick=function(){
    if(num>1){num--};
    $num.innerText=num;
}
$plus.onclick=function(){
    if(num<10){num++};
    $num.innerText=num;
}
$minus2.onclick=function(){
    if(num>1){num--};
    $num2.innerText=num;
}
$plus2.onclick=function(){
    if(num<10){num++};
    $num2.innerText=num;
}
$config.onclick=function(){
    $options.style.display='block';
}
$toggle_mode.onclick=function(){
    mode=1-mode;
    $blue.style.display=['block','none'][mode];
    $pink.style.display=['none','block'][mode];
}
$close_opt.onclick=function(){
    $options.style.display='none';
}
$start.onclick=redrawbutton.onclick=function(){
    $entering.style.display='none';
    $drawing.style.display='inline-block';
    start();
}

function getid(x){
    return all_index.indexOf(x);
}
function start(){
    $display_num.innerText=num;
    $drawtitle.style.display='inline-block';
    $redraw.style.display='none';
    cells=[]
    for(var i=0;i<5;i++){
        rows[i].innerHTML='';
    }
    for(var i=0;i<num;i++){
        rows[i%5].innerHTML+='<td><span id="cell'+i+'" class="bt5">ğŸ€</span></td>';
    }
    for(var i=0;i<num;i++){
        cells.push($('cell'+i));
    }
    if(!mode){
        rest=[];
    }
    for(var i=0;i<num-1;i++){
        drawone(i);
    }
    if(configs.eggs.able && Math.random()<configs.eggs.p_end){
        var _rest=rest.concat();
        drawone(num-1);
        rest=_rest;
        var _name=configs.fixed[which]||choose(rest);
        next(function(args){cells[which].innerText=getid(args[2])+' '+(configs.cuttwo?args[2].slice(-2):args[2])},1,_name);
        rest=rest.filter(function(x){return x!=name});
        //æ²¡å†™å®Œ
    }else{drawone(num-1);}
    next(function(){
        $num2.innerText=num;
        $redrawball.src=['blue','pink'][mode]+'.png';
        $drawtitle.style.display='none';
        $redraw.style.display='inline-block';
        for(var i=0;i<num;i++){
            cells[i].onclick=(function(i){
                return function(){
                    drawone(i);
                    next(function(){
                        bgm.pause();
                        indrawing=false;
                    });
                    bgm.play()
                    next=Timer();
                };
            })(i);
        bgm.pause();
        indrawing=false;
        }
    });
    indrawing=true;
    bgm.play()
    next=Timer();
}
function drawone(which,before=configs.before){
    for(var i=0;i<before;i++){
        next(function(){cells[which].innerText=choose(all)});
    }
    if(!rest.length){
        rest=all.concat();
    }
    var name=configs.fixed[which]||choose(rest);
    next(function(args){
        cells[which].innerText=getid(args[2])+' '+(configs.cuttwo?args[2].slice(-2):args[2]);
        if(mode&&args[3]){
            cells[which].innerHTML+='<span style="color:#000000;display:inline-block;font-size:0.4em;line-height:1em;"><br />ä¿<br />åº•</span>';
        }
        if(!mode){
            var _id=getid(args[2]);
            var _star=star[_id]+=1;
            if(_star>0){
                var _text=_star<7?_star:'6+';
                cells[which].innerHTML+='<span style="color:#000000;display:inline-block;font-size:0.4em;line-height:1em;"><br />'+_text+'<br />å‘½</span>';
            }
        }

    },1,name,rest.length==1);
    rest=rest.filter(function(x){return x!=name});
}

var time=new Date();
var ext={exclude:[6,13,23,30]};
if(time.getHours()<9){
    all=all.filter(function(x){return ext.exclude.indexOf(getid(x))==-1})
}

}catch(e){alert('éƒ½æ€ªé˜¿éŸ¦ä¸ä»”ç»†ï¼Œè¿™ä¸ªé¡µé¢å‡ºç°äº†ä¸€ä¸ªBugï¼\né”™è¯¯ä¿¡æ¯ï¼š'+e)}
</script>
</body>
</html>